<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>教員用システム詳細設計 - フローチャート</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background-color: #f4f7f9; padding: 40px; }
        .container { background: #fff; padding: 40px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 900px; margin: auto; }
        h2 { border-left: 5px solid #007bff; padding-left: 15px; color: #2c3e50; }
        
        /* フローチャートの描画エリア */
        .chart-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: #fff;
        }

        /* 共通ボックススタイル */
        .box {
            width: 220px;
            padding: 10px;
            margin: 15px 0;
            text-align: center;
            border: 1px solid #333;
            background-color: #d9e1f2;
            position: relative;
            font-size: 0.9em;
            font-weight: bold;
        }

        /* 開始・終了（楕円） */
        .oval { border-radius: 50px; width: 180px; }
        
        /* 判断（ひし形） */
        .diamond {
            width: 140px;
            height: 140px;
            transform: rotate(45deg);
            background-color: #ffffff;
            margin: 40px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .diamond span {
            transform: rotate(-45deg);
            display: block;
            text-align: center;
        }

        /* 矢印（簡易実装） */
        .line {
            width: 2px;
            height: 15px;
            background: #333;
            position: relative;
        }
        .line::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: -4px;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 6px solid #333;
        }

        /* 横方向の分岐用 */
        .branch-container { display: flex; gap: 40px; align-items: flex-start; }
        .branch-line { height: 2px; background: #333; width: 50px; margin-top: -15px; }
    </style>
</head>
<body>

<div class="container">
    <h2>8. フローチャート（教員用管理ポータル）</h2>
    
    <div class="chart-container">
        <div class="box oval">開始（ログイン）</div>
        <div class="line"></div>
        
        <div class="box">メイン監視画面を表示<br>(index.php)</div>
        <div class="line"></div>

        <div class="diamond"><span>どの処理を<br>実行するか</span></div>
        
        <div class="branch-container">
            <div style="display:flex; flex-direction:column; align-items:center;">
                <div style="font-size:0.8em;">5秒毎の自動更新</div>
                <div class="line"></div>
                <div class="box" style="background-color:#e2f0d9;">最新センサーデータを<br>AJAXで取得</div>
                <div class="line"></div>
                <div class="box" style="background-color:#fff2cc;">環境判定<br>(CO2濃度/照度)</div>
                <div class="line"></div>
                <div class="box">警告リストの更新<br>およびカード色の変更</div>
            </div>

            <div style="display:flex; flex-direction:column; align-items:center;">
                <div style="font-size:0.8em;">環境管理ボタン押下</div>
                <div class="line"></div>
                <div class="box">詳細画面を表示<br>(detail.php)</div>
                <div class="line"></div>
                <div class="box">グラフ描画<br>(Chart.js実行)</div>
                <div class="line"></div>
                <div class="box">リスク算出<br>(感染症/カビ/ダニ)</div>
            </div>

            <div style="display:flex; flex-direction:column; align-items:center;">
                <div style="font-size:0.8em;">出席管理ボタン押下</div>
                <div class="line"></div>
                <div class="box">出席管理画面を表示<br>(attendance.php)</div>
                <div class="line"></div>
                <div class="box">授業・科目を選択</div>
                <div class="line"></div>
                <div class="box" style="background-color:#ffeb3b;">単位取得判定を実行<br>(出席率 80%基準)</div>
            </div>
        </div>

        <div class="line" style="height:30px;"></div>
        <div class="box">待機状態に戻る</div>
        <div class="line"></div>
        <div class="box oval">終了</div>
    </div>
</div>

</body>
</html>